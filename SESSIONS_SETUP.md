# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### Backend (FastAPI)
- ‚úÖ –ú–æ–¥–µ–ª—å Session –≤ `src/model/models.py`
- ‚úÖ API —Å—Ö–µ–º—ã –≤ `src/schema/session.py`
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ `src/repository/session_repository.py`
- ‚úÖ –°–µ—Ä–≤–∏—Å –≤ `src/services/session_service.py`
- ‚úÖ API endpoints –≤ `src/api/v1/endpoints/sessions.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä dependency injection
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω router –≤ –æ—Å–Ω–æ–≤–Ω–æ–π API

### Frontend (React)
- ‚úÖ API –∫–ª–∏–µ–Ω—Ç `sessions-api.ts`
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `SessionsManager.tsx`
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
- ‚úÖ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `migrations/session_migration.py`
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î

```bash
cd backend
python migrations/session_migration.py
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à auth_service.py —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ:

```python
async def login_for_access_token(self, form_data, request):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ...

    # –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
    from src.schema.session import SessionCreate
    session_data = SessionCreate(
        user_id=user.id,
        device_name=self._get_device_name(request),
        browser_name=self._get_browser_name(request),
        operating_system=self._get_os_name(request),
        ip_address=request.client.host if request.client else None,
        user_agent=request.headers.get("user-agent")
    )

    session = await self._session_service.create_session(session_data)
    return {"access_token": token, "session_id": session.id}
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

```tsx
import SessionsManager from './SessionsManager';

function App() {
  return (
    <div className="app">
      <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏</h1>
      <SessionsManager token="your-jwt-token" />
    </div>
  );
}
```

### 4. API Endpoints

–î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:
- `GET /api/v1/sessions` - —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/v1/sessions/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π
- `POST /api/v1/sessions/terminate` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
- `POST /api/v1/sessions/set-current/{id}` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

## üîß –§—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã

- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –±—Ä–∞—É–∑–µ—Ä–µ, IP, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ª—é–±–æ–π —Å–µ—Å—Å–∏–∏ (–∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏ –∫–∞–∫ —Ç–µ–∫—É—â–µ–π
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–π

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–π

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
